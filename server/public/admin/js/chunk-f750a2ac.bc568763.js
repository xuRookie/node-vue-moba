(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f750a2ac"],{"244c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advert-create"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.id?"编辑":"新增")+"广告位")]),t.id?a("el-button",{staticClass:"btn-back",attrs:{type:"text"},on:{click:t.handleBack}},[t._v("返回")]):t._e()],1),a("el-form",{ref:"advertForm",attrs:{model:t.advertForm,"label-width":"140px"},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.advertForm.name,callback:function(e){t.$set(t.advertForm,"name",e)},expression:"advertForm.name"}})],1),a("el-form-item",{attrs:{label:"广告"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.handleAddAd}},[t._v("添加广告")]),a("el-row",{staticClass:"mt-2",staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.advertForm.items,(function(e,r){return a("el-col",{key:r,staticClass:"b-dashed mb-1",attrs:{span:24}},[a("el-form-item",{attrs:{label:"跳转链接（URL）"}},[a("el-input",{model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}})],1),a("el-form-item",{staticClass:"mt-2",attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,headers:t.getAuthorization(),"on-success":function(a){return t.$set(e,"image",a.url)},"before-upload":t.beforeAvatarUpload}},[e.image?a("img",{staticClass:"avatar",attrs:{src:e.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticClass:"pb-1"},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.handleDeleteAd(r)}}},[t._v("删除")])],1)],1)})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)],1)},s=[],n=(a("a434"),a("96cf"),a("1da1")),i={props:{id:{type:String}},data:function(){return{advertForm:{name:"",items:[]}}},created:function(){this.id&&this.handleGetDetails()},methods:{handleGetDetails:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/rest/ads/".concat(t.id));case 3:a=e.sent,t.advertForm=Object.assign({},t.advertForm,a),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),r=e.t0.data.message,t.$message.error(r||e.t0.statusText||"广告位详情获取失败");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},beforeAvatarUpload:function(t){var e=/(png|jpg|gif|jpeg|webp)$/,a=t.size/1024/1024<5;return e.test(t.type)?(a||this.$message.error("上传头像图片大小不能超过 5MB!"),a):(this.$message.error("上传图片格式错误！"),!1)},handleAddAd:function(){this.advertForm.items.push({})},handleDeleteAd:function(t){this.advertForm.items.splice(t,1)},handleSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=6;break}return e.next=4,t.$http.put("/rest/ads",t.advertForm);case 4:e.next=8;break;case 6:return e.next=8,t.$http.post("/rest/ads",t.advertForm);case 8:t.$message.success("保存成功"),t.$router.push("/ads/list"),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),a=e.t0.data.message,t.$message.error(a||e.t0.statusText||"广告位保存失败");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},handleBack:function(){this.$router.go(-1)}}},l=i,c=(a("7cdb"),a("2877")),o=Object(c["a"])(l,r,s,!1,null,"06f9c66c",null);e["default"]=o.exports},4022:function(t,e,a){},"7cdb":function(t,e,a){"use strict";var r=a("4022"),s=a.n(r);s.a}}]);